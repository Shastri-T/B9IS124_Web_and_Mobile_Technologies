/**************************************** JSON variable ******************************************/
products_list =

    [

        {
            "id": "1",
            "name": "Treadmill Endurance",
            "category": "Cardio",
            "featuredimage": "./Media/product_images/Treadmill_Endurance_T85.png",
            "price": "€ 1200",
            "stockcount": 5,
            "description": "Lets you have control over key variables (duration, speed and incline), so you get great data and can feel more organized than random",
            "features": [
                {
                    "feature": "Tablet / Phone Holder"
                },
                { "feature": "LED Display Computer" },
                { "feature": "Pulse Sensors" },
                { "feature": "Deck size: 121cm x 42cm" }
            ],
            "additionalimages": [
                { "image": "./Media/product_images/additional_images/1/Treadmill_Endurance_A.png" },
                { "image": "./Media/product_images/additional_images/1/Treadmill_Endurance_B.png" },
                { "image": "./Media/product_images/additional_images/1/Treadmill_Endurance_C.png" }
            ],
            "reviews": [
                {
                    "person": "Cody",
                    "comment": "Excellent product and easy to assemble",
                    "rating": 5
                },

                {
                    "person": "Claudia",
                    "comment": "Great Product",
                    "rating": 4
                },

                {
                    "person": "Adam",
                    "comment": "Good Product",
                    "rating": 3
                }

            ]

        },


        {
            "id": "2",
            "name": "Treadclimber Treadmill",
            "category": "Cardio",
            "featuredimage": "./Media/product_images/TreadClimber_MS_100X.png",
            "price": "€ 900",
            "stockcount": 7,
            "description": "Combines a smooth elliptical motion with the stepping effect of a stair climber and the forward motion of a treadmill",
            "features": [
                {
                    "feature": "3.0HP Motor"
                },
                { "feature": "Top running speed: 16kph" },
                { "feature": "Handlebar pulse sensors" },
                {
                    "feature": "Maximum user weight: 130kg"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/2/Treadmill_Climber_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/2/Treadmill_Climber_B.png"
                }
            ],

            "reviews": [
                {
                    "person": "Nicole",
                    "comment": "Awesome Product with multiple features",
                    "rating": 5
                },

                {
                    "person": "Claudia",
                    "comment": "Good Product",
                    "rating": 3
                },

                {
                    "person": "Sara",
                    "comment": "Great Product",
                    "rating": 4
                }

            ]

        },


        {
            "id": "3",
            "name": "Combination Treadmill",
            "category": "Cardio",
            "featuredimage": "./Media/product_images/Combination_Treadmill_AC_SX466.png",
            "price": "€ 1400",
            "stockcount": 10,
            "description": "Cardiovascular health benefits can be achieved by combining treadmill and elliptical exercise in your workout regimen",
            "features": [
                {
                    "feature": "Fully Backlit LCD Display"
                },
                { "feature": "Heart-Rate Monitor" },
                { "feature": "Water Bottle & Media Shelf/Tablet Holder" },
                {
                    "feature": "1.75HP Motor"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/3/Treadmill_Combination_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/3/Treadmill_Combination_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Robert",
                    "comment": "Great Product",
                    "rating": 5
                },

                {
                    "person": "Monica",
                    "comment": "Excellent Product",
                    "rating": 5
                },

                {
                    "person": "Gilbert",
                    "comment": "Good Product",
                    "rating": 5
                }

            ]

        },

        {
            "id": "4",
            "name": "Dead Lift Shrug Bar",
            "category": "Storage",
            "featuredimage": "./Media/product_images/Dead_Lift_Shrug_Bar.png",
            "price": "€ 100",
            "stockcount": 12,
            "description": "Trains the glutes, hamstrings quads and back, with less stress",
            "features": [
                {
                    "feature": "Accelerate your weight"
                },
                {
                    "feature": "The body to have a wider foot stance"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/4/Deadlift_Shrugbar_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/4/Deadlift_Shrugbar_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Robert",
                    "comment": "Great Product",
                    "rating": 4
                },

                {
                    "person": "Sam",
                    "comment": "Excellent Product",
                    "rating": 5
                }

            ]

        },

        {
            "id": "5",
            "name": "Hex Dumbbells Solid Pairs",
            "category": "Weights",
            "featuredimage": "./Media/product_images/Hex_Dumbbells_Solid Pairs.png",
            "price": "€ 50",
            "stockcount": 5,
            "description": "For compound, multi-joint or multi-planar movements, which enhance coordination between different body segments",
            "features": [
                {
                    "feature": "Hex dumbbells are ideal for home gym"
                },
                { "feature": "Better for CrossFit and functional fitness" },
                {
                    "feature": "Floor based exercises"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/5/Hex_Dumbbells_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/5/Hex_Dumbbells_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Peter",
                    "comment": "Great Product",
                    "rating": 5
                },

                {
                    "person": "Samuel",
                    "comment": "Good Product",
                    "rating": 4
                }

            ]

        },

        {
            "id": "6",
            "name": "Dumbbell Set Adjustable",
            "category": "Weights",
            "featuredimage": "./Media/product_images/Dumbbell_Set_Adjustable.png",
            "price": "€ 75",
            "stockcount": 8,
            "description": "Used for joint-isolation exercises such as biceps curls, chest flyes or shoulder raises",
            "features": [
                {
                    "feature": "Use for joint-isolation exercises"
                },
                {
                    "feature": "It is use for full-body, multiplanar movements"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/6/Dumbell_Set_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/6/Dumbell_Set_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Maria",
                    "comment": "Great Product",
                    "rating": 5
                },

                {
                    "person": "Henry",
                    "comment": "Good Product",
                    "rating": 3
                },

                {
                    "person": "Nancy",
                    "comment": "Excellent Product",
                    "rating": 5
                }

            ]

        },


        {
            "id": "7",
            "name": "Tricep Bicep Rope",
            "category": "Studio",
            "featuredimage": "./Media/product_images/KOMODO_Tricep_Rope_Bicep_Pull_Down_Cable.png",
            "price": "€ 45",
            "stockcount": 9,
            "description": "It is an attachment for cable systems and can be used for a variety of exercises to target triceps, biceps, shoulders, abs, and back",
            "features": [
                {
                    "feature": "Triceps, biceps, shoulders and abs- all effectively trained"
                },
                { "feature": "Designed to optimise triceps contraction" },
                {
                    "feature": "Heavy Duty Triceps Rope"
                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/7/Tricep_Rope_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/7/Tricep_Rope_B.png"
                },
                { "image": "./Media/product_images/additional_images/7/Tricep_Rope_C.png" }
            ],
            "reviews": [
                {
                    "person": "Cody",
                    "comment": "Excellent Product",
                    "rating": 5
                },

                {
                    "person": "Justin",
                    "comment": "Good Product",
                    "rating": 4
                }

            ]

        },

        {
            "id": "8",
            "name": "Chest Supported Row",
            "category": "Weights",
            "featuredimage": "./Media/product_images/Chest_Supported_Row.png",
            "price": "€ 250",
            "stockcount": 7,
            "description": "Chest supported rows are some of the best back exercises that will help isolate the back muscles YET still allow you to lift heavy loads",
            "features": [
                {
                    "feature": "Increase stability and safety of pull exercise"
                },
                {
                    "feature": "It works your back, rear shoulders and improves your posture"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/8/Chest_Support_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/8/Chest_Support_B.png"
                },
                { "image": "./Media/product_images/additional_images/8/Chest_Support_C.png" }
            ],
            "reviews": [
                {
                    "person": "Michael",
                    "comment": "Good Product",
                    "rating": 4
                },

                {
                    "person": "Brendan",
                    "comment": "Great Product",
                    "rating": 4
                },

                {
                    "person": "Gilbert",
                    "comment": "Excellent Product",
                    "rating": 5
                }

            ]

        },

        {
            "id": "9",
            "name": "Push Ups Stands",
            "category": "Storage",
            "featuredimage": "./Media/product_images/Push_Ups_Stands.png",
            "price": "€ 50",
            "stockcount": 14,
            "description": "Push-up stands can help you exercise while you regain strength in your wrists, as push-up stands place your wrists in a more ergonomically neutral position",
            "features": [
                {
                    "feature": "Engage more muscles to maximize results"
                },
                { "feature": "360° stability with non-skid platform allows for use on multiple surfaces" },
                {
                    "feature": "Easy storage with stacking handles"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/9/Pushup_Stands_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/9/Pushup_Stands_B.png"
                },
                {
                    "image": "./Media/product_images/additional_images/9/Pushup_Stands_C.png"
                }
            ],
            "reviews": [
                {
                    "person": "Claudia",
                    "comment": "Good Product",
                    "rating": 4
                },

                {
                    "person": "John",
                    "comment": "Excellent Product",
                    "rating": 5
                },

                {
                    "person": "Nancy",
                    "comment": "Good Product",
                    "rating": 3
                }

            ]

        },

        {
            "id": "10",
            "name": "Leg Exercise 3D Models",
            "category": "Cardio",
            "featuredimage": "./Media/product_images/Leg_Exercise_3D_Models.png",
            "price": "€ 2500",
            "stockcount": 15,
            "description": "Leg workouts stimulate some of the largest muscles in your body, which helps create a metabolic state that is conducive to muscle growth",
            "features": [
                {
                    "feature": "Strengthens the core"
                },
                {
                    "feature": "Provides better aesthetics and muscularity"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/10/Treadmill_Combination_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/10/Treadmill_Combination_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Monica",
                    "comment": "Excellent Product",
                    "rating": 4
                },

                {
                    "person": "Albert",
                    "comment": "Great Product",
                    "rating": 3
                }

            ]

        },

        {
            "id": "11",
            "name": "Bolt Station Strength Cable Machine",
            "category": "Machines",
            "featuredimage": "./Media/product_images/Bolt_Station_Strength_Cable_Machine.png",
            "price": "€ 3000",
            "stockcount": 5,
            "description": "High grade functional, bodybuilding, and powerlifting fitness equipment for residential and commercial use",
            "features": [
                {
                    "feature": "Lat pull-down"
                },
                { "feature": "Adjustable cable crossover" },
                {
                    "feature": "Pull-up bar great anchor for suspension training"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/11/Treadmill_Combination_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/11/Treadmill_Combination_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Cody",
                    "comment": "Excellent Product",
                    "rating": 5
                },

                {
                    "person": "John",
                    "comment": "Great Product",
                    "rating": 4
                },

                {
                    "person": "Neil",
                    "comment": "Awesome Product",
                    "rating": 5
                }

            ]

        },

        {
            "id": "12",
            "name": "Pullover Machine",
            "category": "Machines",
            "featuredimage": "./Media/product_images/Pullover_Machine.png",
            "price": "€ 1800",
            "stockcount": 1,
            "description": "The pullover machine allows you to work your latissimus dorsi muscles in isolation from your arms",
            "features": [
                {
                    "feature": "Strengthen the chest musculature"
                },
                {
                    "feature": "It works all pectoral and dorsal muscles at the same time"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/12/Treadmill_Combination_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/12/Treadmill_Combination_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Adam",
                    "comment": "Excellent Product",
                    "rating": 5
                },

                {
                    "person": "Nicole",
                    "comment": "Great Product",
                    "rating": 5
                },

                {
                    "person": "Smith",
                    "comment": "Awesome Product",
                    "rating": 4
                }

            ]

        },

        {
            "id": "13",
            "name": "Decline Sit up Bench",
            "category": "Weights",
            "featuredimage": "./Media/product_images/Decline_Sit_up_Bench.png",
            "price": "€ 2000",
            "stockcount": 2,
            "description": "Decline version is less stressful on the back and shoulders",
            "features": [
                {
                    "feature": "Ideal for stretching, abs and leg work out"
                },
                { "feature": "Use for push up and back sit up" },
                {
                    "feature": "Durable and freestanding decline bench"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/13/Treadmill_Combination_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/13/Treadmill_Combination_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Ken",
                    "comment": "Great Product",
                    "rating": 4
                },

                {
                    "person": "Sam",
                    "comment": "Good Product",
                    "rating": 5
                },

                {
                    "person": "Mike",
                    "comment": "Awesome Product",
                    "rating": 5
                }

            ]

        },

        {
            "id": "14",
            "name": "Kamachi Multistation",
            "category": "Multistation",
            "featuredimage": "./Media/product_images/Kamachi_Multistation.png",
            "price": "€ 1700",
            "stockcount": 3,
            "description": "This machine is multi-functional as it can be efficiently used for different flat, and Incline exercises. It can also be used for arms and legs strengthening",
            "features": [
                {
                    "feature": "Heavy Gauge Construction"
                },
                { "feature": "Large Comfortable Foam Leg Rolls" },
                { "feature": "Continuous Loop Cable System" },
                {
                    "feature": "Easily Operate able Weight Stacks"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/14/Treadmill_Combination_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/14/Treadmill_Combination_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Robert",
                    "comment": "Excellent",
                    "rating": 5
                },

                {
                    "person": "Sam",
                    "comment": "Good",
                    "rating": 3
                },

                {
                    "person": "Mike",
                    "comment": "Awesome",
                    "rating": 4
                }

            ]

        },

        {
            "id": "15",
            "name": "Titan T1 Gym",
            "category": "Machines",
            "featuredimage": "./Media/product_images/Titan_T1_Gym.png",
            "price": "€ 2300",
            "stockcount": 11,
            "description": "Build muscle, tighten and tone your muscles with the Titan. This machine allows you to target your lower back, glutes, legs, hamstring",
            "features": [
                {
                    "feature": "Unbelievable durability and reliability"
                },
                { "feature": "Availability of over 100 valuable exercises on a single machine" },
                {
                    "feature": "Possibility of quick adjustment and transitions between the exercises"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/15/Treadmill_Combination_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/15/Treadmill_Combination_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Cody",
                    "comment": "Excellent",
                    "rating": 5
                },

                {
                    "person": "Michael",
                    "comment": "Great Product",
                    "rating": 4
                },

                {
                    "person": "Mike",
                    "comment": "Awesome",
                    "rating": 5
                }

            ]

        },

        {
            "id": "16",
            "name": "TuffStuff Apollo",
            "category": "Studio",
            "featuredimage": "./Media/product_images/TuffStuff_Apollo_7400.png",
            "price": "€ 900",
            "stockcount": 15,
            "description": "The multi-purpose station offers virtually unlimited cable exercise potential: perform standing rows, core rotations, lat pull downs, triceps extensions",
            "features": [
                {
                    "feature": "Allows multiple simultaneous users"
                },
                { "feature": "Three independent 200 kgs. steel weight stacks" },
                {
                    "feature": "Compact footprint helps to conserve space"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/16/Treadmill_Combination_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/16/Treadmill_Combination_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Alan",
                    "comment": "Awesome",
                    "rating": 5
                },

                {
                    "person": "Mike",
                    "comment": "Great",
                    "rating": 4
                },

                {
                    "person": "Tyson",
                    "comment": "Excellent",
                    "rating": 5
                }

            ]

        },

        {
            "id": "17",
            "name": "Hack Squat Machine",
            "category": "Multistation",
            "featuredimage": "./Media/product_images/Hack_Squat_Machine.png",
            "price": "€ 1100",
            "stockcount": 10,
            "description": "Works the entire lower body, including the glutes, hamstrings, quads, and calves",
            "features": [
                {
                    "feature": "It works the entire lower body"
                },
                {
                    "feature": "hack squat removes some stabilization aspects of regular squats"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/17/Treadmill_Combination_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/17/Treadmill_Combination_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Glen",
                    "comment": "Good",
                    "rating": 4
                },

                {
                    "person": "Robert",
                    "comment": "Awesome",
                    "rating": 5
                },

                {
                    "person": "Kelly",
                    "comment": "Excellent",
                    "rating": 5
                }

            ]

        },

        {
            "id": "18",
            "name": "Bolt Seated Leg Cul",
            "category": "Machines",
            "featuredimage": "./Media/product_images/Bolt_Seated_Leg_Cul.png",
            "price": "€ 2000",
            "stockcount": 5,
            "description": "Allows the user to be seated comfortably is a position adjusted specifically for them. They can engage in a fantastic lower body workout",
            "features": [
                {
                    "feature": "Use to increase overall leg strength"
                },
                {
                    "feature": "It can engage in a fantastic lower body workout"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/18/Treadmill_Combination_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/18/Treadmill_Combination_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Claudia",
                    "comment": "Great",
                    "rating": 5
                },

                {
                    "person": "Samuel",
                    "comment": "Good",
                    "rating": 3
                },

                {
                    "person": "Henry",
                    "comment": "Excellent",
                    "rating": 5
                }

            ]

        },

        {
            "id": "19",
            "name": "Peloton Indoor Exercise Bicycle",
            "category": "Cardio",
            "featuredimage": "./Media/product_images/Peloton_Indoor_Exercise_Bicycle.png",
            "price": "€ 800",
            "stockcount": 6,
            "description": "Can help build strength in your legs and lower body, especially if you use a higher resistance",
            "features": [
                {
                    "feature": "It includes an LCD monitor for viewing live-streamed workouts"
                },
                { "feature": "Running treadmill" },
                {
                    "feature": "Outdoor jogging"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/19/Treadmill_Combination_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/19/Treadmill_Combination_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Glen",
                    "comment": "Good",
                    "rating": 4
                },

                {
                    "person": "Nancy",
                    "comment": "Excellent",
                    "rating": 4
                },

                {
                    "person": "Michael",
                    "comment": "Great",
                    "rating": 4
                }

            ]

        },

        {
            "id": "20",
            "name": "Leg Exercise AZ799",
            "category": "Cardio",
            "featuredimage": "./Media/product_images/Leg_Exercise_AZ799.png",
            "price": "€ 75",
            "stockcount": 1,
            "description": "Total Flex L is a compact home gym exercise equipment that helps you workout on your upper body, midsection and lower body",
            "features": [
                {
                    "feature": "Maintains good body symmetry"
                },
                {
                    "feature": "Strengthens the core"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/20/Treadmill_Combination_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/20/Treadmill_Combination_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Victoria",
                    "comment": "Good",
                    "rating": 3
                },

                {
                    "person": "Adam",
                    "comment": "Great",
                    "rating": 3
                }

            ]

        },

        {
            "id": "21",
            "name": "Ab Power Wheel",
            "category": "Studio",
            "featuredimage": "./Media/product_images/Ab_Power_Wheel.png",
            "price": "€ 350",
            "stockcount": 20,
            "description": "Besides strength training and bodybuilding, using the abs wheel improves your health and fitness in a lot of ways",
            "features": [
                {
                    "feature": "Ab wheels work core muscles"
                },
                {
                    "feature": "Wheel roller to do exercises for flat belly"

                }
            ],
            "additionalimages": [
                {
                    "image": "./Media/product_images/additional_images/21/Treadmill_Combination_A.png"
                },
                {
                    "image": "./Media/product_images/additional_images/21/Treadmill_Combination_B.png"
                }
            ],
            "reviews": [
                {
                    "person": "Nicole",
                    "comment": "Excellent",
                    "rating": 2
                },

                {
                    "person": "Claudia",
                    "comment": "Excellent",
                    "rating": 2
                },

                {
                    "person": "Nancy",
                    "comment": "Awesome",
                    "rating": 2
                }

            ]

        }

    ];


/**************************************** search functionality ******************************************/

$("#productsearch").keyup(function (event) {
    //console.log($("#productsearch").val());
    if ($("#productsearch").val().trim() == "") {
        $(".navLinks>li>a:contains('Home')").parent().click();
        dynamichtml = "";
        products_list = [];
        products_list = JSON.parse(localStorage.getItem("json"));
        GetProductHtml(products_list);
    }

    else {
        products_list = [];
        $.each(JSON.parse(localStorage.getItem("json")), function (i, v) {
            if (v.name.toLowerCase().indexOf($("#productsearch").val().toLowerCase()) != -1 || v.category.toLowerCase().indexOf($("#productsearch").val().toLowerCase()) != -1) {
                products_list.push(v);
            }
        });
        //console.log(products_list);
        GetProductHtml(products_list);
    }
});


/************************************* dynamic navigation menu creation ************************************/

menu_linkshtml = "";
menu_links = [];
navlink = "";

$.each(products_list, function (index, value) {
    if ($.inArray(value.category, menu_links) === -1) {
        menu_links.push(value.category);
    }
});

menu_links.splice(0, 0, "Home");

for (var i = 0; i < menu_links.length; i++) {
    if (i == 0) {
        menu_linkshtml = "<li class='active' style='cursor:pointer'> <a href='./index.html'>" + menu_links[i] + "</a></li>";
    }
    else {
        navlink = "./index.html?cat=" + menu_links[i].trim();
        menu_linkshtml += "<li style='cursor:pointer'> <a href=" + navlink + ">" + menu_links[i] + "</a></li>";
    }
}

$(".navLinks").append(menu_linkshtml);


/**************************************** products card creation ******************************************/

localStorage.setItem("json", JSON.stringify(products_list));
dynamichtml = "";
products_list = [];
products_list = JSON.parse(localStorage.getItem("json"));
GetProductHtml(products_list);

category = "";
category = getUrlParameter("cat");
if (category != "") {
    $(".navLinks>li>a:contains('" + category + "')").parent().click();
}

if ($('.navLinks>li.active')[0].textContent.trim() != "Home") {
    products_list = [];
    products_list = JSON.parse(localStorage.getItem("json"));

    products_list = products_list.filter(function (i) {
        return i.category == $('.navLinks>li.active')[0].textContent.trim();
    });
    //console.log(products_list);
    GetProductHtml(products_list);
}

else {
    products_list = [];
    products_list = JSON.parse(localStorage.getItem("json"));
    GetProductHtml(products_list);
}


/**************************************** document.ready function ******************************************/

$(document).ready(function () {
    $('.navLinks>li').on('click', function () {
        $('li').removeClass('active');
        $(this).toggleClass('active');
    });

    category = "";
    category = getUrlParameter("cat");

    if (category != "") {
        $(".navLinks>li>a:contains('" + category + "')").parent().click();
    }

    if ($('.navLinks>li.active')[0].textContent.trim() != "Home") {
        products_list = [];
        products_list = JSON.parse(localStorage.getItem("json"));

        products_list = products_list.filter(function (i) {
            return i.category == $('.navLinks>li.active')[0].textContent.trim();
        });

        console.log(products_list);

        GetProductHtml(products_list);
    }

    else {
        products_list = [];
        products_list = JSON.parse(localStorage.getItem("json"));
        GetProductHtml(products_list);
    }
});


/**************************************** set css for product cards ****************************************/

function SetProductDetailCSS() {
    $(".product-colors span").click(function () {
        $(".product-colors span").removeClass("active");
        $(this).addClass("active");
        $("body").css("background", $(this).attr("data-color"));
        $(".product-price").css("color", $(this).attr("data-color"));
        $(".product-button").css("color", $(this).attr("data-color"));
        $(".product-pic").css("background-image", $(this).attr("data-pic"));
    });
}


/*************************** function to generate html for product details page ********************************/

function GetProductDetailHtml(jsonarray) {
    $("#cart").hide();
    $("#productdetail").show();
    medialist = "";
    featurelist = "";
    productimg = "";
    categorylinkhtml = "";
    final_rating = 0;
    actual_rating = 0;
    UserRating="";
    userRatingHtml="";

    product_data = products_list.filter(function (i) {
        return i.id == String(getUrlParameter('id'));
    });

    for (var i = 0; i < product_data[0].reviews.length; i++) {
        final_rating += product_data[0].reviews[i].rating
    }

    actual_rating = Math.round(final_rating / product_data[0].reviews.length * 10) / 10;
    final_rating = Math.round(final_rating / product_data[0].reviews.length);

    if (final_rating == 5) {
        ratinghtml = "<a style='text-decoration:none' href='#modal'> <div id='product_rating'  class='rating5star'> <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span> <span style='color:black'>&nbsp;|&nbsp;" + product_data[0].reviews.length + " Reviews <span></div> </a>";
    }

    if (final_rating == 4) {
        ratinghtml = "<a style='text-decoration:none' href='#modal'><div id='product_rating'  class='rating4star'> <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span> <span style='color:black'>&nbsp;|&nbsp;" + product_data[0].reviews.length + " Reviews <span></div></a>";
    }

    if (final_rating == 3) {
        ratinghtml = "<a style='text-decoration:none' href='#modal'><div id='product_rating' onclick='ShowRatings()' class='rating3star'> <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span><span style='color:black'>&nbsp;|&nbsp;" + product_data[0].reviews.length + " Reviews <span></div></a>";
    }

    if (final_rating == 2) {
        ratinghtml = "<a style='text-decoration:none' href='#modal'><div id='product_rating' onclick='ShowRatings()' class='rating2star'> <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span><span style='color:black'>&nbsp;|&nbsp;" + product_data[0].reviews.length + " Reviews <span></div></a>";
    }

    if (final_rating == 1) {
        ratinghtml = "<a style='text-decoration:none' href='#modal'><div id='product_rating' onclick='ShowRatings()' class='rating1star'> <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span><span style='color:black'>&nbsp;|&nbsp;" + product_data[0].reviews.length + " Reviews <span></div></a>";
    }

    categorylinkhtml = "<a style='color:#02AAB0;text-decoration: none;font-weight:500' href='./index.html?cat=" + product_data[0].category.trim() + "'>" + product_data[0].category + "</a>";
    $("#categorylink").append(categorylinkhtml);

    medialist = "<span data-pic='url(" + product_data[0].featuredimage + ")' class='active'> <img src='" + product_data[0].featuredimage + "'></img> </span>";

    for (var i = 0; i < product_data[0].additionalimages.length; i++) {
        medialist += "<span data-pic='url(" + product_data[0].additionalimages[i].image + ")'> <img src='" + product_data[0].additionalimages[i].image + "'></img> </span>";
    }

    productimg = "<li class='product_card_images'> <div style='display:flex;flex-direction:column;'> <div class='product-pic'></div>  <div class='product-colors'>" + medialist + "</div></div></li>";


    if (product_data[0].features.length == 1) {
        productimg += "<li class='product_card_desc'> <div style='display:flex;flex-direction:column;'><b><span>" + product_data[0].description + "</span></b><br/>" + ratinghtml + " </span> <br/> <b><span style='color:brown'>" + product_data[0].price + "<div style='float:left'> <div style='align-items:center'> <label id='lblqty'>Quantity</label> <select id='productqty'></select> </div> <button id='product_add_to_cart' onclick='AddtoCart()' class='btn card_btn btn-grad'>Add to Cart</button> </div> </span></b></div></li> ";
    }

    else {

        for (var i = 0; i < product_data[0].features.length; i++) {
            if (i == 0) {
                productimg += "<li class='product_card_desc'> <div style='display:flex;flex-direction:column;'><b><span>" + product_data[0].description + "</span></b><br/>" + ratinghtml + " </span> <br/> <b><span style='color:brown'>" + product_data[0].price + " <br/> <div style='align-items:center'><label id='lblqty'>Quantity &nbsp;</label> <select id='productqty'> </select> </div> <button id='product_add_to_cart' onclick='AddtoCart()' class='btn card_btn btn-grad'>Add to Cart</button> </span></b> <ul style='padding-left:15px'><br/>";
            }

            if (i != 0 && i == product_data[0].features.length - 1) {
                productimg += "<li><span>" + product_data[0].features[i].feature + "</span></li></ul></div></li>";
            }

            if (i != 0 && i != product_data[0].features.length - 1) {
                productimg += "<li><span>" + product_data[0].features[i].feature + "</span></li>";
            }
        }
    }
    $("#product-card").append(productimg);
    $("#product_name").text(product_data[0].name);
    $(".product-pic").css("background-image", "url('" + product_data[0].featuredimage + "')");
    $(".product-pic").css("background-repeat", "no-repeat");
    $(".product-pic").css("background-position", "left center");

    for (var i = 0; i < product_data[0].stockcount; i++) {
        $('#productqty').append('<option value="">' + (i + 1) + '</option>');
    }

    $("#modal h2").html("Reviews & Ratings for "+product_data[0].name + "<a id='Modalclosebtn' href='#'>X</a>");

    for (var i = 0; i < product_data[0].reviews.length; i++) {
    if(product_data[0].reviews[i].rating==5)
    {
        UserRating="★★★★★";
    }

    if(product_data[0].reviews[i].rating==4)
    {
        UserRating="★★★★";
    }

    if(product_data[0].reviews[i].rating==3)
    {
        UserRating="★★★";
    }

    if(product_data[0].reviews[i].rating==2)
    {
        UserRating="★★";
    }

    if(product_data[0].reviews[i].rating==1)
    {
        UserRating="★";
    }
    

    userRatingHtml +="<br/> <span style='color:orange'>"+UserRating+"</span> by "+product_data[0].reviews[i].person+" : "+product_data[0].reviews[i].comment+"<br/>";
    
    }

    $(".copy span").append(userRatingHtml);
}

/********************** function to generate html for products on landing page ***************************/

function GetProductHtml(jsonarray) {
    $("#productcatalog").html("");
    dynamichtml = "";
    $.each(jsonarray, function () {
        ratinghtml = "";
        final_rating = 0;
        actual_rating = 0;

        for (var i = 0; i < this.reviews.length; i++) {
            final_rating += this.reviews[i].rating
        }

        actual_rating = Math.round(final_rating / this.reviews.length * 10) / 10;
        final_rating = Math.round(final_rating / this.reviews.length);

        console.log(final_rating);

        if (final_rating == 5) {
            ratinghtml = "<div id='rating' class='rating5star'><span class='tooltiptext'>" + actual_rating + " out of 5</span><span>★</span><span>★</span><span>★</span><span>★</span><span>★</span></div>";
        }

        if (final_rating == 4) {
            ratinghtml = "<div id='rating' class='rating4star'><span class='tooltiptext'>" + actual_rating + " out of 5</span><span>★</span><span>★</span><span>★</span><span>★</span><span>★</span></div>";
        }

        if (final_rating == 3) {
            ratinghtml = "<div id='rating' class='rating3star'><span class='tooltiptext'>" + actual_rating + " out of 5</span><span>★</span><span>★</span><span>★</span><span>★</span><span>★</span></div>";
        }

        if (final_rating == 2) {
            ratinghtml = "<div id='rating' class='rating2star'><span class='tooltiptext'>" + actual_rating + " out of 5</span><span>★</span><span>★</span><span>★</span><span>★</span><span>★</span></div>";
        }

        if (final_rating == 1) {
            ratinghtml = "<div id='rating' class='rating1star'><span class='tooltiptext'>" + actual_rating + " out of 5</span><span>★</span><span>★</span><span>★</span><span>★</span><span>★</span></div>";
        }

        dynamichtml += "<li class='cards_item'><div class='card'><a href='./product.html?id=" + this.id + "'><div class='card_image'><img src='" + this.featuredimage + "'></div></a><div class='card_content'><h1 class='card_title'>" + this.name + "</h1> <div class='card_price'> <span> Price: " + this.price + "</span></div><br/>" + ratinghtml + "<br/> <div class='card_review'> <span>" + this.reviews.length + " Reviews </span> </div><br/><button onclick='Navigateproductdetails(" + this.id + ")'' id='view_product_detail' class='btn card_btn btn-grad'>More</button> </div></div></li>";

        //<button id='add_to_cart' class='btn card_btn btn-grad'>Add to Cart</button>
    });
    $("#productcatalog").append(dynamichtml);
}


/******************************* function to get query string values ***********************************/

function getUrlParameter(sParam) {
    var sPageURL = window.location.search.substring(1),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
        }
    }
    return false;
};

/********************* function to show navigation menu icon for mobile devices ************************/

function myFunction() {
    $(".navLinks")[0].classList.toggle("responsive");
}

/*********************************** function to navigate to home page *********************************/

function NavigateHome() {
    window.location.href = "./index.html";
}

/**************************** function to navigate to product details page ******************************/

function Navigateproductdetails(itemid) {
    window.location.href = "./product.html?id=" + itemid;
}